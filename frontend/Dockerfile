FROM node:16.19-bullseye-slim

ARG AWS_COGNITO_AUTH_REGION
ARG AWS_COGNITO_AUTH_USER_POOL_ID
ARG AWS_COGNITO_AUTH_USER_POOL_WEB_CLIENT_ID

ENV AWS_COGNITO_AUTH_REGION=$AWS_COGNITO_AUTH_REGION
ENV AWS_COGNITO_AUTH_USER_POOL_ID=$AWS_COGNITO_AUTH_USER_POOL_ID
ENV AWS_COGNITO_AUTH_USER_POOL_WEB_CLIENT_ID=$AWS_COGNITO_AUTH_USER_POOL_WEB_CLIENT_ID

WORKDIR /frontend
COPY . /frontend

RUN apt update -y

RUN npm ci
RUN npm run build

EXPOSE 3000

CMD npm run start
